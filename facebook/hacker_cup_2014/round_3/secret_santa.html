<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Puzzles</title>

    
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/theme_extras.js"></script>
    <link rel="top" title="Puzzles 1.0 documentation" href="../../../index.html" />
    <link rel="up" title="Round 3" href="../round_3.html" />
    <link rel="next" title="Finals" href="../finals.html" />
    <link rel="prev" title="Restaurant Chains" href="restaurant_chains.html" /> 
  </head>
  <body>
      <div class="header">
    <h1 class="heading">
        <a href="../../../index.html">
          <span>Puzzles</span>
        </a>
    </h1>

      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="restaurant_chains.html">Restaurant Chains</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../finals.html">Finals</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="secret-santa">
<h1>Secret Santa<a class="headerlink" href="#secret-santa" title="Permalink to this headline">¶</a></h1>
<p>There are <strong>K</strong> families living in Christmasville. During Christmas they have
this tradition, where each person secretly gets a gift for some other person.
The assignment of who gives gift to whom is generally done by a lottery, but
this time we are writing a program to do it.</p>
<p>The assignment should have the following properties:</p>
<ul class="simple">
<li>Each person should give exactly one gift.</li>
<li>Each person should receive exactly one gift.</li>
<li>A person should not give a gift to someone within the same family.</li>
</ul>
<p>Find out how many possible assignments are there, that satisfy above
constraints. Two assignments are considered different, if there exists some
person, who gives gifts to different people in the two assignments. Since this
number may be very large, output this number modulo 1,000,000,007</p>
<div class="section" id="input">
<h2>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h2>
<p>The first line of the input consists of a single integer <strong>T</strong>, the number of
test cases.</p>
<p>Each test case starts with a line containing the integer <strong>K</strong>, the number of
families.</p>
<p>The next line of each test case contains <strong>K</strong> integers, n<sub>1</sub>,
n<sub>2</sub>, ..., n<sub>K</sub>, where n<sub>i</sub> is the number of people in
the i<sup>th</sup> family.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>For each test case <strong>i</strong> numbered from 1 to <strong>T</strong>, output &#8220;Case #i: &#8221;, followed
by the number of valid assignments, modulo 1,000,000,007</p>
</div>
<div class="section" id="constraints">
<h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<p>1 ≤ <strong>T</strong> ≤ 20
2 ≤ <strong>K</strong> ≤ 100
1 ≤ n<sub>i</sub> ≤ 4
1 ≤ n<sub>1</sub> + n<sub>2</sub> + ... + n<sub>K</sub> ≤ 100</p>
</div>
<div class="section" id="example-input">
<h2>Example input<a class="headerlink" href="#example-input" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre>5
2
1 1
3
1 1 1
2
2 2
3
2 2 2
4
1 2 3 4
</pre></div>
</div>
</div>
<div class="section" id="example-output">
<h2>Example output<a class="headerlink" href="#example-output" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre>Case #1: 1
Case #2: 2
Case #3: 4
Case #4: 80
Case #5: 97344
</pre></div>
</div>
<p><a class="reference external" href="https://www.facebook.com/hackercup/problems.php?pid=1427296790834577&amp;round=1433361756892155">View online</a>.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="restaurant_chains.html">Restaurant Chains</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../finals.html">Finals</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>