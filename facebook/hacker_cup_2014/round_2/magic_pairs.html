<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Puzzles</title>

    
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/theme_extras.js"></script>
    <link rel="top" title="Puzzles 1.0 documentation" href="../../../index.html" />
    <link rel="up" title="Round 2" href="../round_2.html" />
    <link rel="next" title="Ski Resort Planning" href="ski_resort_planning.html" />
    <link rel="prev" title="Hold’em Numbers" href="holdem_numbers.html" /> 
  </head>
  <body>
      <div class="header">
    <h1 class="heading">
        <a href="../../../index.html">
          <span>Puzzles</span>
        </a>
    </h1>

      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="holdem_numbers.html">Hold&#8217;em Numbers</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="ski_resort_planning.html">Ski Resort Planning</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="magic-pairs">
<h1>Magic Pairs<a class="headerlink" href="#magic-pairs" title="Permalink to this headline">¶</a></h1>
<p>The princess of the kingdom of Hackadia has been kidnapped by an evil dragon.
As always the prince Z.A.Y. is going to try to rescue her. The evil dragon is
keeping the princess prisoner in his deepest dungeon, and the prince has to
solve a puzzle to get her out safely.</p>
<p>There are two straight boards in front of the dungeon, both divided into a
large number of sections. Each section contains a sparkling gemstone. Each
stone has a color. We will denote these colors with numbers.</p>
<p>Let&#8217;s say these boards Board<sub>1</sub> and Board<sub>2</sub> contain <strong>N</strong> and
<strong>M</strong> sections respectively.
Let&#8217;s call a pair of integers <strong>x</strong>, <strong>y</strong> a magic pair if they have the
following properties:</p>
<ol class="arabic simple">
<li>0 ≤ <strong>x</strong> &lt; <strong>N</strong></li>
<li>0 ≤ <strong>y</strong> &lt; <strong>M</strong></li>
<li>The set of different colors in Board<sub>1</sub>[0...x] equals the set of different colors in Board<sub>2</sub>[0...y].</li>
</ol>
<p>The prince has asked you to find out how many magic pairs exist for the given
two boards, so he can free the princess and become the hero. He will take all
the glory from this, so you will have to make do with points in this
competition as payment for your help.</p>
<p>Since the numbers <strong>N</strong> and <strong>M</strong> might be very large, the colors of the
gemstones will be supplied through a pseudo random generator. This works as
follows:</p>
<p>Board<sub>1</sub>[0] = <strong>x1</strong></p>
<p>Board<sub>2</sub>[0] = <strong>x2</strong></p>
<p>Board<sub>1</sub>[i] = (a1 * Board<sub>1</sub>[(i-1) % N] + b1 *
Board<sub>2</sub>[(i-1) % M] + c1) % r1, for 0 &lt; i &lt; N</p>
<p>Board<sub>2</sub>[i] = (a2 * Board<sub>1</sub>[(i-1) % N] + b2 *
Board<sub>2</sub>[(i-1) % M] + c2) % r2, for 0 &lt; i &lt; M</p>
<div class="section" id="input">
<h2>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h2>
<p>The first line of the input consists of a single integer <strong>T</strong>, the number of
test cases.</p>
<p>Each test case starts with a line containing the integers <strong>N, M</strong></p>
<p>The second line of each test case contains five integers <strong>x1, a1, b1, c1, r1</strong></p>
<p>The third line of each test case contains five integers <strong>x2, a2, b2, c2, r2</strong></p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>For each test case i numbered from <strong>1</strong> to <strong>T</strong>, output &#8220;Case #i: &#8221;, followed
by the number of magic pairs for the two boards.</p>
</div>
<div class="section" id="constraints">
<h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<p>1 ≤ <strong>T</strong> ≤ 20</p>
<p>1 ≤ <strong>N, M</strong> ≤ 10^6</p>
<p>0 ≤ <strong>x1, x2, a1, a2, b1, b2, c1, c2</strong> ≤ 10^9</p>
<p>1 ≤ <strong>r1, r2</strong> ≤ 10^9</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>The first example produces the following boards:</p>
<p>Board<sub>1</sub> = [0, 3, 2, 0, 4, 2, 1, 3]</p>
<p>Board<sub>2</sub> = [0, 4, 2, 1, 4, 3]</p>
<p>There are 3 magic pairs:</p>
<p>pair(0, 0) ==&gt; (0)</p>
<p>pair(6, 5) ==&gt; (0, 1, 2, 3, 4)</p>
<p>pair(7, 5) ==&gt; (0, 1, 2, 3, 4)</p>
</div>
<div class="section" id="example-input">
<h2>Example input<a class="headerlink" href="#example-input" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre>5
8 6
0 0 1 3 5
0 1 0 4 5
5 5
2 5 2 5 7
2 9 3 2 7
12 11
2 5 2 5 7
2 9 3 2 7
10 10
0 1 0 1 11
0 0 1 1 11
10 10
0 1 0 1 11
0 0 1 10 11
</pre></div>
</div>
</div>
<div class="section" id="example-output">
<h2>Example output<a class="headerlink" href="#example-output" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text"><div class="highlight"><pre>Case #1: 3
Case #2: 3
Case #3: 6
Case #4: 10
Case #5: 1
</pre></div>
</div>
<p><a class="reference external" href="https://www.facebook.com/hackercup/problems.php?pid=620734011349888&amp;round=544142832342014">View online</a>.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="holdem_numbers.html">Hold&#8217;em Numbers</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="ski_resort_planning.html">Ski Resort Planning</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>